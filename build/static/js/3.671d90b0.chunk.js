(this.webpackJsonpflyfy=this.webpackJsonpflyfy||[]).push([[3],{120:function(e,t,n){},128:function(e,t,n){"use strict";n.r(t);var a=n(15),r=n(8),c=n(1),o=n(0),s=n.n(o),i=n(5),l=n(19),u=n(3),f=n.n(u),m=n(2),p=(n(120),function(e){var t=e.room,n=e.connected,a=e.client,r=e.messages,i=e.position,u=e.userTyping,p=Object(o.useState)(""),O=Object(c.a)(p,2),g=O[0],y=O[1];Object(o.useEffect)((function(){a.send(JSON.stringify(t))}),[]);return s.a.createElement("div",{style:{right:i},className:"chat-popup"},s.a.createElement("div",{className:"head"},s.a.createElement("p",null,t.name||t.room)),s.a.createElement("div",{className:"chat"},r?r.map((function(e,t){var n=r[t+1]||!0,a=n&&e.from!==n.from;return s.a.createElement("div",{className:"text-message from-".concat(e.isUser?"user":"friend").concat(a?" last":""),key:t},s.a.createElement("p",null,e.content.message))})):s.a.createElement(s.a.Fragment,null),u&&s.a.createElement("p",null,"User is typing")),s.a.createElement("div",{className:"footer"},s.a.createElement("div",{className:"message"},s.a.createElement(l.a,{maxRows:5,value:g,onChange:function(e){return y(e.target.value)},onKeyDown:function(){var e={type:"typing",to:t.room};a.send(JSON.stringify(e))},spellCheck:"false",draggable:"false",placeholder:"Type your message"})),s.a.createElement("div",{className:"actions"},s.a.createElement(f.a,{className:"send-icon",onClick:function(){var e={type:"message",to:t.room,content:{message:g}};y(""),n&&a.send(JSON.stringify(e))},path:m.B,size:.7,color:"#303030"}))))});function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}t.default=function(){var e=Object(o.useState)(!1),t=Object(c.a)(e,2),n=t[0],l=t[1],u=Object(o.useState)({}),f=Object(c.a)(u,2),m=f[0],g=f[1],y=Object(o.useState)(null),b=Object(c.a)(y,2),j=b[0],v=b[1],d=Object(o.useState)(!1),E=Object(c.a)(d,2),h=E[0],S=E[1],k=Object(o.useContext)(i.a).openRooms;Object(o.useEffect)((function(){var e=localStorage.token||sessionStorage.token,t=new WebSocket("".concat("wss://flyfy.herokuapp.com","?token=").concat(e));t.onclose=function(){return l(!1)},t.onerror=function(e){console.log("WebSocket error: ".concat(e)),l(!1)},t.onmessage=function(e){return w(e)},v(t)}),[]);var w=function(e){var t=JSON.parse(e.data);({message:function(){return g((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(n,!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,Object(r.a)({},t.to,[].concat(Object(a.a)(e[t.to]||[]),[t])))}))},connection:function(){return l(!0)},typing:function(){S(!0)}})[t.type].call()};return k.map((function(e,t){return s.a.createElement(p,{key:t,connected:n,room:e,position:325*(t+1)-100,client:j,receive:w,messages:m[e.room],userTyping:h})}))}}}]);
//# sourceMappingURL=3.671d90b0.chunk.js.map